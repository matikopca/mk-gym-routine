<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym Routine Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0a0a0a 50%, #000000 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #ff4444, #ff6666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header h1 svg {
            stroke: url(#headerGradient);
        }

        .day-selector {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
        }

        .day-dropdown {
            position: relative;
            width: 200px;
        }

        .day-select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 68, 68, 0.3);
            border-radius: 25px;
            color: #ffffff;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ff6666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            padding-right: 50px;
            transition: all 0.3s ease;
        }

        .day-select:hover {
            border-color: rgba(255, 68, 68, 0.5);
            background-color: rgba(0, 0, 0, 0.9);
        }

        .day-select:focus {
            outline: none;
            border-color: #ff6666;
            box-shadow: 0 0 0 3px rgba(255, 102, 102, 0.2);
        }

        .day-select option {
            background: #000000;
            color: #ffffff;
            padding: 10px;
        }

        .workout-day {
            display: none;
        }

        .workout-day.active {
            display: block;
        }

        .day-title {
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 25px;
            color: #ffffff;
        }

        .exercise {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .exercise.collapsed {
            padding: 15px 20px;
        }

        .exercise.collapsed .exercise-content {
            display: none;
        }

        .exercise-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            position: relative;
        }

        .exercise-header:hover {
            opacity: 0.8;
        }

        .expand-btn {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid rgba(255, 68, 68, 0.4);
            color: #ff6666;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: bold;
        }

        .expand-btn:hover {
            background: rgba(255, 68, 68, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .expand-btn.collapsed {
            transform: translateY(-50%) rotate(180deg);
        }

        .exercise-controls {
            position: absolute;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .exercise:hover .exercise-controls {
            opacity: 1;
        }

        .control-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .edit-btn {
            background: rgba(120, 120, 120, 0.2);
            color: #cccccc;
            border: 1px solid rgba(120, 120, 120, 0.3);
        }

        .edit-btn:hover {
            background: rgba(120, 120, 120, 0.3);
            color: #ffffff;
            transform: scale(1.1);
        }

        .delete-btn {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .delete-btn:hover {
            background: rgba(220, 53, 69, 0.3);
            transform: scale(1.1);
        }

        .exercise-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            background: linear-gradient(45deg, #ff4444, #ff6666);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .exercise-image svg {
            width: 30px;
            height: 30px;
            stroke: white;
            fill: none;
            stroke-width: 2;
        }

        .exercise-info h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .exercise-info p {
            color: #aaa;
            font-size: 0.9rem;
        }

        .sets-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .set {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            border: 1px solid rgba(255, 68, 68, 0.1);
        }

        .set.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .set-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #ff6666;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .set-checkbox.checked {
            background: #ff6666;
            color: white;
        }

        .set-checkbox.checked::after {
            content: '✓';
            font-weight: bold;
            font-size: 14px;
        }

        .set-info {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .set-number {
            font-weight: 600;
            color: #ff6666;
        }

        .set-reps {
            color: #aaa;
        }

        .add-exercise {
            background: linear-gradient(45deg, #ff4444, #ff6666);
            border: none;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .add-exercise:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.4);
        }

        .exercise-form {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            display: none;
        }

        .exercise-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #ff6666;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6666;
            box-shadow: 0 0 0 2px rgba(255, 102, 102, 0.2);
        }

        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 1rem;
        }

        .form-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            flex: 1;
        }

        .btn-primary {
            background: #ff6666;
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 68, 68, 0.2);
            color: #ff6666;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .btn:hover {
            transform: translateY(-1px);
        }

        .reset-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn-reset-day {
            background: rgba(60, 60, 60, 0.8);
            border: 1px solid rgba(80, 80, 80, 0.6);
            color: #cccccc;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        .btn-reset-day:hover {
            background: rgba(80, 80, 80, 0.9);
            color: #ffffff;
            transform: translateY(-1px);
        }

        .btn-reset-all {
            background: rgba(40, 40, 40, 0.8);
            border: 1px solid rgba(60, 60, 60, 0.6);
            color: #aaaaaa;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        .btn-reset-all:hover {
            background: rgba(60, 60, 60, 0.9);
            color: #ffffff;
            transform: translateY(-1px);
        }

        .exercise.completed {
            opacity: 0.7;
            background: rgba(80, 80, 80, 0.2);
            border-color: rgba(100, 100, 100, 0.4);
        }

        .exercise.completed .exercise-info h3 {
            text-decoration: line-through;
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .day-btn {
                padding: 10px 15px;
                font-size: 0.8rem;
                min-width: 70px;
            }
            
            .exercise {
                padding: 15px;
            }
            
            .exercise-image {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <svg width="0" height="0" style="position: absolute;">
            <defs>
                <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff4444;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#ff6666;stop-opacity:1" />
                </linearGradient>
            </defs>
        </svg>
        <div class="header">
            <h1>
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                </svg>
                Gym Routine
            </h1>
            <p>Track your daily workouts</p>
        </div>

        <div class="day-selector">
            <div class="day-dropdown">
                <select class="day-select" id="daySelect" onchange="switchDay(this.value)">
                    <option value="monday">Monday</option>
                    <option value="tuesday">Tuesday</option>
                    <option value="wednesday">Wednesday</option>
                    <option value="thursday">Thursday</option>
                    <option value="friday">Friday</option>
                </select>
            </div>
        </div>

        <div id="monday" class="workout-day active">
            <div class="reset-buttons">
                <button class="btn-reset-day" onclick="resetDay('monday')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    Reset Day
                </button>
                <button class="btn-reset-all" onclick="resetAllDays()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    Reset All
                </button>
            </div>
            <h2 class="day-title">Monday Workout</h2>
            <div class="exercises-container"></div>
            <button class="add-exercise" onclick="showAddExerciseForm('monday')">+ Add Exercise</button>
        </div>

        <div id="tuesday" class="workout-day">
            <div class="reset-buttons">
                <button class="btn-reset-day" onclick="resetDay('tuesday')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    Reset Day
                </button>
                <button class="btn-reset-all" onclick="resetAllDays()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    Reset All
                </button>
            </div>
            <h2 class="day-title">Tuesday Workout</h2>
            <div class="exercises-container"></div>
            <button class="add-exercise" onclick="showAddExerciseForm('tuesday')">+ Add Exercise</button>
        </div>

        <div id="wednesday" class="workout-day">
            <div class="reset-buttons">
                <button class="btn-reset-day" onclick="resetDay('wednesday')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    Reset Day
                </button>
                <button class="btn-reset-all" onclick="resetAllDays()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    Reset All
                </button>
            </div>
            <h2 class="day-title">Wednesday Workout</h2>
            <div class="exercises-container"></div>
            <button class="add-exercise" onclick="showAddExerciseForm('wednesday')">+ Add Exercise</button>
        </div>

        <div id="thursday" class="workout-day">
            <div class="reset-buttons">
                <button class="btn-reset-day" onclick="resetDay('thursday')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    Reset Day
                </button>
                <button class="btn-reset-all" onclick="resetAllDays()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    Reset All
                </button>
            </div>
            <h2 class="day-title">Thursday Workout</h2>
            <div class="exercises-container"></div>
            <button class="add-exercise" onclick="showAddExerciseForm('thursday')">+ Add Exercise</button>
        </div>

        <div id="friday" class="workout-day">
            <div class="reset-buttons">
                <button class="btn-reset-day" onclick="resetDay('friday')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                    Reset Day
                </button>
                <button class="btn-reset-all" onclick="resetAllDays()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    Reset All
                </button>
            </div>
            <h2 class="day-title">Friday Workout</h2>
            <div class="exercises-container"></div>
            <button class="add-exercise" onclick="showAddExerciseForm('friday')">+ Add Exercise</button>
        </div>
    </div>

    <script>
        // Sample workout data
        const defaultWorkouts = {
            monday: [
                {
                    id: 1,
                    name: "Bench Press",
                    image: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="9" y1="12" x2="15" y2="12"/>
                        <line x1="9" y1="9" x2="9" y2="15"/>
                        <line x1="15" y1="9" x2="15" y2="15"/>
                        <rect x="4" y="10" width="2" height="4"/>
                        <rect x="18" y="10" width="2" height="4"/>
                        <line x1="3" y1="12" x2="6" y2="12"/>
                        <line x1="18" y1="12" x2="21" y2="12"/>
                    </svg>`,
                    sets: 4,
                    reps: "8-10",
                    completedSets: []
                },
                {
                    id: 2,
                    name: "Squats",
                    image: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>`,
                    sets: 4,
                    reps: "10-12",
                    completedSets: []
                }
            ],
            tuesday: [
                {
                    id: 1,
                    name: "Pull-ups",
                    image: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12h18"/>
                        <path d="M12 3v18"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>`,
                    sets: 3,
                    reps: "6-8",
                    completedSets: []
                }
            ],
            wednesday: [],
            thursday: [],
            friday: []
        };

        let currentDay = 'monday';
        let workouts = JSON.parse(localStorage.getItem('gymWorkouts')) || defaultWorkouts;

        // Initialize the app
        function init() {
            setupDaySelector();
            loadWorkouts();
            saveWorkouts();
        }

        // Setup day selector
        function setupDaySelector() {
            const daySelect = document.getElementById('daySelect');
            daySelect.value = currentDay; // Set initial value
        }

        // Switch between days
        function switchDay(day) {
            // Update dropdown selection
            const daySelect = document.getElementById('daySelect');
            daySelect.value = day;

            // Update active workout day
            document.querySelectorAll('.workout-day').forEach(workoutDay => {
                workoutDay.classList.remove('active');
            });
            document.getElementById(day).classList.add('active');

            currentDay = day;
        }

        // Load workouts for current day
        function loadWorkouts() {
            Object.keys(workouts).forEach(day => {
                const container = document.querySelector(`#${day} .exercises-container`);
                container.innerHTML = '';
                
                workouts[day].forEach(exercise => {
                    const exerciseElement = createExerciseElement(exercise, day);
                    container.appendChild(exerciseElement);
                });
            });
        }

        // Create exercise element
        function createExerciseElement(exercise, day) {
            const exerciseDiv = document.createElement('div');
            exerciseDiv.className = 'exercise';
            exerciseDiv.dataset.exerciseId = exercise.id;
            
            const isCompleted = exercise.completedSets.length === exercise.sets;
            const isCollapsed = exercise.collapsed === true; // Only check explicit collapsed state
            
            if (isCompleted) {
                exerciseDiv.classList.add('completed');
            }
            
            if (isCollapsed) {
                exerciseDiv.classList.add('collapsed');
            }

            const setsHtml = Array.from({length: exercise.sets}, (_, i) => {
                const setNumber = i + 1;
                const isSetCompleted = exercise.completedSets.includes(setNumber);
                return `
                    <div class="set ${isSetCompleted ? 'completed' : ''}">
                        <div class="set-checkbox ${isSetCompleted ? 'checked' : ''}" 
                             onclick="toggleSet(${exercise.id}, ${setNumber}, '${day}')"></div>
                        <div class="set-info">
                            <span class="set-number">Set ${setNumber}</span>
                            <span class="set-reps">${exercise.reps} reps</span>
                        </div>
                    </div>
                `;
            }).join('');

            const expandIcon = isCollapsed ? '▼' : '▲';

            exerciseDiv.innerHTML = `
                <div class="exercise-header" onclick="toggleExercise(${exercise.id}, '${day}')">
                    <div class="exercise-image">${exercise.image}</div>
                    <div class="exercise-info">
                        <h3>${exercise.name}</h3>
                        <p>${exercise.sets} sets × ${exercise.reps} reps</p>
                    </div>
                    <div class="exercise-controls">
                        <button class="control-btn edit-btn" onclick="event.stopPropagation(); editExercise(${exercise.id}, '${day}')" title="Edit Exercise">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                        </button>
                        <button class="control-btn delete-btn" onclick="event.stopPropagation(); deleteExercise(${exercise.id}, '${day}')" title="Delete Exercise">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 6h18"/>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                <line x1="10" y1="11" x2="10" y2="17"/>
                                <line x1="14" y1="11" x2="14" y2="17"/>
                            </svg>
                        </button>
                    </div>
                    <div class="expand-btn ${isCollapsed ? 'collapsed' : ''}">${expandIcon}</div>
                </div>
                <div class="exercise-content">
                    <div class="sets-container">
                        ${setsHtml}
                    </div>
                </div>
            `;

            return exerciseDiv;
        }

        // Toggle set completion
        function toggleSet(exerciseId, setNumber, day) {
            const exercise = workouts[day].find(ex => ex.id === exerciseId);
            if (!exercise) return;

            const setIndex = exercise.completedSets.indexOf(setNumber);
            if (setIndex > -1) {
                exercise.completedSets.splice(setIndex, 1);
            } else {
                exercise.completedSets.push(setNumber);
            }

            // Check if all sets are completed
            const isCompleted = exercise.completedSets.length === exercise.sets;
            if (isCompleted) {
                exercise.completed = true;
                exercise.collapsed = true; // Auto-collapse when completed
            } else {
                exercise.completed = false;
            }

            saveWorkouts();
            loadWorkouts();
        }

        // Toggle exercise expand/collapse
        function toggleExercise(exerciseId, day) {
            const exercise = workouts[day].find(ex => ex.id === exerciseId);
            if (!exercise) return;

            exercise.collapsed = !exercise.collapsed;
            saveWorkouts();
            loadWorkouts();
        }

        // Show add exercise form
        function showAddExerciseForm(day) {
            // Hide any existing edit forms
            hideAllEditForms();
            
            const form = document.createElement('div');
            form.className = 'exercise-form active';
            form.innerHTML = `
                <div class="form-group">
                    <label>Exercise Name</label>
                    <input type="text" id="exerciseName" placeholder="e.g., Bench Press">
                </div>
                <div class="form-group">
                    <label>Exercise Type</label>
                    <select id="exerciseImage">
                        <option value="">Select Exercise Type</option>
                        <option value="strength">Strength</option>
                        <option value="cardio">Cardio</option>
                        <option value="flexibility">Flexibility</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Number of Sets</label>
                    <input type="number" id="exerciseSets" placeholder="4" min="1" max="10">
                </div>
                <div class="form-group">
                    <label>Reps</label>
                    <input type="text" id="exerciseReps" placeholder="8-10">
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" onclick="addExercise('${day}')">Add Exercise</button>
                    <button class="btn btn-secondary" onclick="hideAddExerciseForm('${day}')">Cancel</button>
                </div>
            `;

            const container = document.querySelector(`#${day} .exercises-container`);
            container.appendChild(form);
        }

        // Hide add exercise form
        function hideAddExerciseForm(day) {
            const form = document.querySelector(`#${day} .exercise-form:not(.edit-form)`);
            if (form) {
                form.remove();
            }
        }

        // Add new exercise
        function addExercise(day) {
            const name = document.getElementById('exerciseName').value.trim();
            const imageType = document.getElementById('exerciseImage').value;
            const sets = parseInt(document.getElementById('exerciseSets').value);
            const reps = document.getElementById('exerciseReps').value.trim();

            if (!name || !imageType || !sets || !reps) {
                alert('Please fill in all fields');
                return;
            }

            // Get SVG icon based on exercise type
            const iconMap = {
                strength: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="9" y1="12" x2="15" y2="12"/>
                    <line x1="9" y1="9" x2="9" y2="15"/>
                    <line x1="15" y1="9" x2="15" y2="15"/>
                    <rect x="4" y="10" width="2" height="4"/>
                    <rect x="18" y="10" width="2" height="4"/>
                    <line x1="3" y1="12" x2="6" y2="12"/>
                    <line x1="18" y1="12" x2="21" y2="12"/>
                </svg>`,
                cardio: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"/>
                </svg>`,
                flexibility: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                </svg>`
            };

            const newExercise = {
                id: Date.now(),
                name: name,
                image: iconMap[imageType] || iconMap.strength,
                sets: sets,
                reps: reps,
                completedSets: []
            };

            workouts[day].push(newExercise);
            saveWorkouts();
            loadWorkouts();
            hideAddExerciseForm(day);
        }

        // Reset a specific day
        function resetDay(day) {
            if (confirm(`Are you sure you want to reset all progress for ${day}?`)) {
                workouts[day].forEach(exercise => {
                    exercise.completedSets = [];
                    exercise.completed = false;
                    exercise.collapsed = false;
                });
                saveWorkouts();
                loadWorkouts();
            }
        }

        // Reset all days
        function resetAllDays() {
            if (confirm('Are you sure you want to reset ALL workout progress? This cannot be undone.')) {
                Object.keys(workouts).forEach(day => {
                    workouts[day].forEach(exercise => {
                        exercise.completedSets = [];
                        exercise.completed = false;
                        exercise.collapsed = false;
                    });
                });
                saveWorkouts();
                loadWorkouts();
            }
        }

        // Edit an exercise
        function editExercise(exerciseId, day) {
            const exercise = workouts[day].find(ex => ex.id === exerciseId);
            if (!exercise) return;

            // Hide any existing edit forms
            hideAllEditForms();

            const exerciseElement = document.querySelector(`[data-exercise-id="${exerciseId}"]`);
            if (!exerciseElement) return;

            const form = document.createElement('div');
            form.className = 'exercise-form active edit-form';
            form.dataset.exerciseId = exerciseId;
            form.innerHTML = `
                <div class="form-group">
                    <label>Exercise Name</label>
                    <input type="text" id="editExerciseName" value="${exercise.name}" placeholder="e.g., Bench Press">
                </div>
                <div class="form-group">
                    <label>Exercise Type</label>
                    <select id="editExerciseImage">
                        <option value="">Select Exercise Type</option>
                        <option value="strength">Strength</option>
                        <option value="cardio">Cardio</option>
                        <option value="flexibility">Flexibility</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Number of Sets</label>
                    <input type="number" id="editExerciseSets" value="${exercise.sets}" placeholder="4" min="1" max="10">
                </div>
                <div class="form-group">
                    <label>Reps</label>
                    <input type="text" id="editExerciseReps" value="${exercise.reps}" placeholder="8-10">
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" onclick="saveEditExercise(${exerciseId}, '${day}')">Save Changes</button>
                    <button class="btn btn-secondary" onclick="cancelEditExercise(${exerciseId}, '${day}')">Cancel</button>
                </div>
            `;

            // Insert the form after the exercise header
            const exerciseHeader = exerciseElement.querySelector('.exercise-header');
            exerciseHeader.insertAdjacentElement('afterend', form);
        }

        // Save edited exercise
        function saveEditExercise(exerciseId, day) {
            const exercise = workouts[day].find(ex => ex.id === exerciseId);
            if (!exercise) return;

            const name = document.getElementById('editExerciseName').value.trim();
            const imageType = document.getElementById('editExerciseImage').value;
            const sets = parseInt(document.getElementById('editExerciseSets').value);
            const reps = document.getElementById('editExerciseReps').value.trim();

            if (!name || !imageType || !sets || !reps) {
                alert('Please fill in all fields');
                return;
            }

            if (isNaN(sets) || sets < 1 || sets > 10) {
                alert('Sets must be a number between 1 and 10');
                return;
            }

            // Get SVG icon based on exercise type
            const iconMap = {
                strength: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="9" y1="12" x2="15" y2="12"/>
                    <line x1="9" y1="9" x2="9" y2="15"/>
                    <line x1="15" y1="9" x2="15" y2="15"/>
                    <rect x="4" y="10" width="2" height="4"/>
                    <rect x="18" y="10" width="2" height="4"/>
                    <line x1="3" y1="12" x2="6" y2="12"/>
                    <line x1="18" y1="12" x2="21" y2="12"/>
                </svg>`,
                cardio: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"/>
                </svg>`,
                flexibility: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                </svg>`
            };

            // Update exercise
            exercise.name = name;
            exercise.image = iconMap[imageType] || iconMap.strength;
            exercise.sets = sets;
            exercise.reps = reps;

            // Reset completed sets if new sets count is different
            if (exercise.completedSets.length > sets) {
                exercise.completedSets = exercise.completedSets.filter(set => set <= sets);
            }

            saveWorkouts();
            loadWorkouts();
        }

        // Cancel edit exercise
        function cancelEditExercise(exerciseId, day) {
            hideAllEditForms();
        }

        // Hide all edit forms
        function hideAllEditForms() {
            const editForms = document.querySelectorAll('.edit-form');
            editForms.forEach(form => form.remove());
        }

        // Delete an exercise
        function deleteExercise(exerciseId, day) {
            const exercise = workouts[day].find(ex => ex.id === exerciseId);
            if (!exercise) return;

            if (confirm(`Are you sure you want to delete "${exercise.name}"?`)) {
                const exerciseIndex = workouts[day].findIndex(ex => ex.id === exerciseId);
                if (exerciseIndex > -1) {
                    workouts[day].splice(exerciseIndex, 1);
                    saveWorkouts();
                    loadWorkouts();
                }
            }
        }

        // Save workouts to localStorage
        function saveWorkouts() {
            localStorage.setItem('gymWorkouts', JSON.stringify(workouts));
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
